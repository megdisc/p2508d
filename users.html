<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>p2508d - アカウント管理モックアップ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="mockup-container">
        <header class="header">
            <div>
                <h1 class="header-logo"><a href="dashboard.html">p2508d</a></h1>
            </div>

            <nav class="nav" id="side-nav">
                <ul class="nav-list">
                    <li><a href="dashboard.html" class="nav-link">ダッシュボード</a></li>
                    <li><a href="daily_records.html" class="nav-link">日々の記録</a></li>
                    <li><a href="members_menu.html" class="nav-link">利用者支援</a></li>
                    <li><a href="work_activities_menu.html" class="nav-link">生産活動</a></li>
                    <li><a href="staff_menu.html" class="nav-link">施設と職員</a></li>
                    <li><a href="accounting_menu.html" class="nav-link">会計</a></li>
                    <li><a href="claims.html" class="nav-link">国保連請求</a></li>
                    <li><a href="analytics_menu.html" class="nav-link">データ分析</a></li>
                    <li><a href="settings.html" class="nav-link active">設定</a></li>
                    <li><a href="my_page.html" class="nav-link">マイページ</a></li>
                </ul>
                <div class="nav-logout-section">
                    <a href="index.html" class="nav-link">ログアウト</a>
                </div>
            </nav>
        </header>

        <main class="mockup-main">
            <div id="users" class="mockup-page active">
                <div class="list-page-header">
                    <h1 class="page-title">アカウント管理</h1>
                    <div>
                        <a href="settings.html" class="button button-secondary" style="margin-right: 0.5rem;">設定TOPへ戻る</a>
                        <button class="button button-primary" onclick="openModal('new-user-modal')">＋ 新規作成</button>
                    </div>
                </div>

                <div class="section">
                    <form class="section-content filter-form-inline" style="margin-bottom: 1.5rem;">
                         <div class="form-group" style="flex-grow: 2;">
                            <label for="search-user-name" class="form-label">ユーザー名</label>
                            <input type="text" id="search-user-name" class="form-control" placeholder="ユーザー名 or ログインIDで検索...">
                        </div>
                        <div class="form-group">
                            <label for="filter-user-role" class="form-label">権限</label>
                            <select id="filter-user-role" class="form-control">
                                <option value="">すべて</option>
                                <option value="管理者">管理者</option>
                                <option value="一般職員">一般職員</option>
                                <option value="閲覧のみ">閲覧のみ</option>
                            </select>
                        </div>
                        <button type="button" class="button button-secondary">クリア</button>
                    </form>

                    <div class="table-wrapper">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ユーザー名</th>
                                    <th>ログインID</th>
                                    <th>権限</th>
                                    <th>最終ログイン</th>
                                </tr>
                            </thead>
                            <tbody id="user-list-tbody">
                                <tr class="clickable-row" onclick="openModal('edit-user-modal')">
                                    <td>職員A（管理者）</td>
                                    <td>admin-user</td>
                                    <td>管理者</td>
                                    <td>2025.10.31 09:00</td>
                                </tr>
                                <tr class="clickable-row" onclick="openModal('edit-user-modal')">
                                    <td>職員B（一般）</td>
                                    <td>staff-b</td>
                                    <td>一般職員</td>
                                    <td>2025.10.30 17:00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="edit-user-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">アカウント編集</h2>
                        <span class="modal-close" onclick="closeModal('edit-user-modal')">&times;</span>
                    </div>

                    <div class="modal-body">
                        <div class="form-group">
                            <label>ユーザー名</label>
                            <input type="text" class="form-control" value="職員A（管理者）" readonly>
                        </div>
                        <div class="form-group">
                            <label>ログインID</label>
                            <input type="text" class="form-control" value="admin-user">
                        </div>
                        <div class="form-group">
                            <label>権限</label>
                            <select class="form-control">
                                <option value="admin" selected>管理者</option>
                                <option value="staff">一般職員</option>
                                <option value="viewer">閲覧のみ</option>
                            </select>
                        </div>
                    </div>

                    <div class="modal-footer" style="display: flex; justify-content: space-between; align-items: center;">
                        <div> <button type="button" class="button button-clear" onclick="alert('パスワードリセットメールを送信しました')">パスワードリセット</button>
                        </div>
                        <div> <button type="button" class="button button-secondary" onclick="closeModal('edit-user-modal')">キャンセル</button>
                            <button type="button" class="button button-danger" style="margin-left: 0.5rem;" onclick="alert('アカウントを削除しますか？')">削除</button>
                            <button type="submit" class="button button-primary" style="margin-left: 0.5rem;">保存</button>
                        </div>
                    </div>
                    </div>
            </div>
            <div id="new-user-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">アカウント新規作成</h2>
                        <span class="modal-close" onclick="closeModal('new-user-modal')">&times;</span>
                    </div>

                    <div class="modal-body">
                         <div class="form-group">
                            <label>ユーザー（職員）</label>
                            <select class="form-control">
                                <option value="">職員を選択...</option>
                                <option value="staff-a">職員A（管理者）</option>
                                <option value="staff-b">職員B（一般）</option>
                                <option value="staff-c">職員C（未設定）</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ログインID</label>
                            <input type="text" class="form-control" placeholder="ログインIDを入力">
                        </div>
                         <div class="form-group">
                            <label>パスワード</label>
                            <input type="password" class="form-control" placeholder="パスワードを入力">
                        </div>
                        <div class="form-group">
                            <label>権限</label>
                            <select class="form-control">
                                <option value="admin">管理者</option>
                                <option value="staff" selected>一般職員</option>
                                <option value="viewer">閲覧のみ</option>
                            </select>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('new-user-modal')">キャンセル</button>
                        <button type="submit" class="button button-primary">作成</button>
                    </div>
                </div>
            </div>
            </main>
    </div>

    <script src="script.js"></script>
    <script>
        // 簡易フィルタリング関数 (例)
        function filterUsers() {
            const searchInput = document.getElementById('search-user-name');
            const roleSelect = document.getElementById('filter-user-role');
            const tableBody = document.getElementById('user-list-tbody');

            if (!searchInput || !roleSelect || !tableBody) return;

            const searchTerm = searchInput.value.toLowerCase();
            const roleFilter = roleSelect.value;
            const rows = tableBody.getElementsByTagName('tr');

            Array.from(rows).forEach(row => {
                const userName = row.cells[0]?.textContent.toLowerCase() || '';
                const loginId = row.cells[1]?.textContent.toLowerCase() || '';
                const role = row.cells[2]?.textContent || '';

                const termMatch = userName.includes(searchTerm) || loginId.includes(searchTerm);
                const roleMatch = roleFilter === "" || role === roleFilter;

                row.style.display = (termMatch && roleMatch) ? '' : 'none';
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
             // フィルタリングイベントリスナー設定
            const searchInputListener = document.getElementById('search-user-name');
            const roleSelectListener = document.getElementById('filter-user-role');
            const clearButton = document.querySelector('#users .filter-form-inline .button-secondary');

            if (searchInputListener) searchInputListener.addEventListener('input', filterUsers);
            if (roleSelectListener) roleSelectListener.addEventListener('change', filterUsers);
            if (clearButton) {
                clearButton.addEventListener('click', () => {
                    const form = document.querySelector('#users .filter-form-inline');
                    if (form) form.reset();
                    filterUsers();
                });
            }
            filterUsers(); // 初期実行
        });
    </script>
</body>
</html>
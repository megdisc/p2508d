<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>利用者情報 - p2508d</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>

    <div class="mockup-container">
        <header class="header">
            <div><h1 class="header-logo"><a href="../dashboard/index.html">p2508d</a></h1></div>
            <nav class="nav" id="side-nav">
                <ul class="nav-list">
                    <li><a href="../dashboard/index.html" class="nav-link">ダッシュボード</a></li>
                    <li><a href="../records/index.html" class="nav-link">日々の記録</a></li>
                    <li><a href="../members/index.html" class="nav-link active">利用者支援</a></li> <li><a href="../staff/index.html" class="nav-link">職員管理</a></li>
                    <li><a href="../production/index.html" class="nav-link">生産活動</a></li>
                    <li><a href="../accounting/index.html" class="nav-link">会計管理</a></li>
                    <li><a href="../billing/index.html" class="nav-link">国保連請求</a></li>
                    <li><a href="../analytics/index.html" class="nav-link">データ分析</a></li>
                    <li><a href="../settings/index.html" class="nav-link">設定</a></li>
                </ul>
                <div class="nav-logout-section"><a href="../index.html" class="nav-link">ログアウト</a></div>
            </nav>
        </header>

        <main class="mockup-main">
            <div id="members" class="mockup-page active"> <div class="list-page-header">
                    <h1 class="page-title">利用者一覧</h1>
                    <div>
                         <a href="../members/index.html" class="button button-secondary" style="margin-right: 0.5rem;">メニューへ戻る</a>
                         <button class="button button-primary" onclick="alert('新規利用者作成画面へ遷移します')">＋ 新規作成</button> </div>
                </div>
                <div class="table-wrapper">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>利用者名</th>
                                <th>契約日</th>
                                <th>担当職員</th>
                                <th>契約ステータス</th>
                            </tr>
                        </thead>
                        <tbody id="member-list-tbody">
                            <tr class="clickable-row" onclick="showPage('member-detail')">
                                <td>青木 誠</td>
                                <td>2024.04.01</td>
                                <td>支援員 次郎</td>
                                <td>利用中</td>
                            </tr>
                            <tr class="clickable-row" onclick="showPage('member-detail')">
                                <td>五十嵐 直人</td>
                                <td>2024.05.01</td>
                                <td>管理者 太郎</td>
                                <td>利用中</td>
                            </tr>
                             <tr class="clickable-row" onclick="showPage('member-detail')">
                                <td>遠藤 雅彦</td>
                                <td>2024.06.15</td>
                                <td>支援員 次郎</td>
                                <td>利用終了</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="member-detail" class="mockup-page"> <div class="list-page-header">
                    <h1 class="page-title">青木 誠 様</h1> <div>
                        <button class="button button-secondary" style="margin-right: 0.5rem;" onclick="showPage('members')">一覧へ戻る</button>
                        <button type="button" class="button button-danger" onclick="alert('「青木 誠」様のデータを削除します。よろしいですか？')">削除</button>
                    </div>
                </div>
                <div class="sub-nav">
                    <ul id="member-detail-subnav">
                        <li><a href="#" class="sub-nav-item active" data-tab="tab-basic-info">基本情報</a></li>
                        <li><a href="#" class="sub-nav-item" data-tab="tab-address-contact">住所・連絡先</a></li>
                        <li><a href="#" class="sub-nav-item" data-tab="tab-usage-settings">利用日設定</a></li>
                        <li><a href="#" class="sub-nav-item" data-tab="tab-calendar">カレンダー</a></li>
                        <li><a href="#" class="sub-nav-item" data-tab="tab-health-medical">健康・医療</a></li>
                        <li><a href="#" class="sub-nav-item" data-tab="tab-certificates">各種証書</a></li>
                        <li><a href="#" class="sub-nav-item" data-tab="tab-support-plan">支援計画</a></li>
                        <li><a href="#" class="sub-nav-item" data-tab="tab-communication">コミュニケーション</a></li>
                        <li><a href="#" class="sub-nav-item" data-tab="tab-documents">関連書類</a></li>
                    </ul>
                </div>
                <div class="tab-content-wrapper" style="border-top: none; border-radius: var(--border-radius);">
                    <div id="tab-basic-info" class="tab-content active">
                        <div class="section">
                            <div class="section-header">
                                <h2 class="section-title-in-header">基本情報</h2>
                                <button class="button button-primary" onclick="openModal('edit-basic-info-modal')">編集</button>
                            </div>
                            <div class="section-content">
                                <dl class="detail-grid"><dt>氏名</dt><dd>青木 誠</dd><dt>フリガナ</dt><dd>アオキ マコト</dd><dt>利用者番号</dt><dd>A001</dd><dt>生年月日</dt><dd>2000年4月1日</dd><dt>性別</dt><dd>男性</dd><dt>契約日</dt><dd>2024年4月1日</dd><dt>契約状況</dt><dd>利用中</dd><dt>担当職員</dt><dd>支援員 次郎</dd></dl>
                            </div>
                            </div>
                    </div>
                    <div id="tab-address-contact" class="tab-content">
                        <div class="section">
                            <div class="section-header">
                                <h2 class="section-title-in-header">住所・連絡先</h2>
                                <button class="button button-primary" onclick="openModal('edit-address-contact-modal')">編集</button>
                            </div>
                             <div class="section-content">
                                <dl class="detail-grid"><dt>郵便番号</dt><dd>123-4567</dd><dt>住所</dt><dd>東京都渋谷区...</dd><dt>電話番号</dt><dd>090-XXXX-XXXX</dd><dt>FAX番号</dt><dd>（未登録）</dd><dt>メールアドレス</dt><dd>aoki.makoto@example.com</dd></dl>
                            </div>
                        </div>
                         <div class="section">
                             <div class="list-page-header">
                                <h2 class="section-title">緊急連絡先</h2>
                                <button type="button" class="button button-primary" id="add-emergency-contact-row">＋ 連絡先を追加</button>
                            </div>
                            <div class="table-wrapper">
                                 <table class="table" id="emergency-contact-table">
                                     <thead>
                                         <tr>
                                             <th>優先度</th>
                                             <th>氏名</th>
                                             <th>続柄</th>
                                             <th>電話番号</th>
                                             <th class="col-actions">操作</th>
                                         </tr>
                                     </thead>
                                     <tbody id="emergency-contact-table-body">
                                         <tr>
                                             <td style="text-align: center;">1</td>
                                             <td><span class="readonly-text">青木 花子</span></td>
                                             <td><span class="readonly-text">母</span></td>
                                             <td><span class="readonly-text">080-XXXX-XXXX</span></td>
                                             <td class="col-actions"><div class="table-button-group"><button type="button" class="button button-secondary edit-row-button" data-modal-id="edit-emergency-contact-modal">編集</button><button type="button" class="button button-danger">削除</button></div></td>
                                         </tr>
                                          <tr>
                                             <td style="text-align: center;">2</td>
                                             <td><span class="readonly-text">青木 太郎</span></td>
                                             <td><span class="readonly-text">父</span></td>
                                             <td><span class="readonly-text">070-YYYY-YYYY</span></td>
                                             <td class="col-actions"><div class="table-button-group"><button type="button" class="button button-secondary edit-row-button" data-modal-id="edit-emergency-contact-modal">編集</button><button type="button" class="button button-danger">削除</button></div></td>
                                         </tr>
                                     </tbody>
                                 </table>
                             </div>
                         </div>
                         <div class="section">
                             <div class="list-page-header">
                                <h2 class="section-title">相談支援専門員</h2>
                                <div class="section-header-controls">
                                    <div class="form-group-inline">
                                        <label><input type="radio" name="specialist-toggle" value="yes" checked> 有り</label>
                                        <label><input type="radio" name="specialist-toggle" value="no"> 無し</label>
                                    </div>
                                    <button type="button" class="button button-primary" id="add-specialist-row">＋ 担当を追加</button>
                                </div>
                             </div>
                             <div class="table-wrapper">
                                <table class="table" id="specialist-table">
                                     <thead><tr><th style="width: 150px;">氏名</th><th>事業所名</th><th>連絡先</th><th class="col-actions" style="width: 100px;">操作</th></tr></thead>
                                    <tbody id="specialist-table-body">
                                         <tr>
                                             <td><span class="readonly-text">□□ □□</span></td><td><span class="readonly-text">相談支援センター××</span></td><td><span class="readonly-text">03-AAAA-BBBB</span></td>
                                             <td class="col-actions"><div class="table-button-group"><button type="button" class="button button-secondary edit-row-button" data-modal-id="edit-specialist-modal">編集</button><button type="button" class="button button-danger">削除</button></div></td>
                                         </tr>
                                    </tbody>
                                </table>
                             </div>
                         </div>
                    </div>
                    <div id="tab-usage-settings" class="tab-content">
                        <div class="section">
                            <div class="section-header">
                                <h2 class="section-title-in-header">利用日設定</h2>
                            </div>
                            <div class="section-content">
                                <div class="table-wrapper">
                                    <table class="table" id="usage-settings-table">
                                        <thead>
                                            <tr>
                                                <th style="width: 80px;">曜日</th>
                                                <th style="width: 100px;">利用区分</th>
                                                <th style="width: 200px;">利用時間</th>
                                                <th style="width: 120px;">送迎</th>
                                                <th style="width: 120px;">昼食</th>
                                                <th>備考</th>
                                            </tr>
                                        </thead>
                                        <tbody id="usage-settings-table-body">
                                            <tr onclick="openModal('edit-usage-setting-modal')" style="cursor: pointer;">
                                                <td><span class="readonly-text" style="font-weight: 600; color: var(--color-danger);">日</span></td>
                                                <td><span class="readonly-text" style="color: var(--color-danger);">休</span></td>
                                                <td><span class="readonly-text"></span></td>
                                                <td><span class="readonly-text">無</span></td>
                                                <td><span class="readonly-text">不要</span></td>
                                                <td><span class="readonly-text" style="text-align: left;"></span></td>
                                            </tr>
                                            <tr onclick="openModal('edit-usage-setting-modal')" style="cursor: pointer;">
                                                <td><span class="readonly-text" style="font-weight: 600;">月</span></td>
                                                <td><span class="readonly-text" style="color: var(--color-primary);">利用</span></td>
                                                <td><span class="readonly-text">09:30 〜 15:30</span></td>
                                                <td><span class="readonly-text">往復</span></td>
                                                <td><span class="readonly-text">要</span></td>
                                                <td><span class="readonly-text" style="text-align: left;"></span></td>
                                            </tr>
                                             <tr onclick="openModal('edit-usage-setting-modal')" style="cursor: pointer;">
                                                <td><span class="readonly-text" style="font-weight: 600;">火</span></td>
                                                <td><span class="readonly-text" style="color: var(--color-primary);">利用</span></td>
                                                <td><span class="readonly-text">09:30 〜 15:30</span></td>
                                                <td><span class="readonly-text">往復</span></td>
                                                <td><span class="readonly-text">要</span></td>
                                                <td><span class="readonly-text" style="text-align: left;"></span></td>
                                            </tr>
                                            <tr onclick="openModal('edit-usage-setting-modal')" style="cursor: pointer;">
                                                <td><span class="readonly-text" style="font-weight: 600;">水</span></td>
                                                <td><span class="readonly-text" style="color: var(--color-primary);">利用</span></td>
                                                <td><span class="readonly-text">09:30 〜 15:30</span></td>
                                                <td><span class="readonly-text">往復</span></td>
                                                <td><span class="readonly-text">要</span></td>
                                                <td><span class="readonly-text" style="text-align: left;"></span></td>
                                            </tr>
                                            <tr onclick="openModal('edit-usage-setting-modal')" style="cursor: pointer;">
                                                <td><span class="readonly-text" style="font-weight: 600;">木</span></td>
                                                <td><span class="readonly-text" style="color: var(--color-primary);">利用</span></td>
                                                <td><span class="readonly-text">09:30 〜 15:30</span></td>
                                                <td><span class="readonly-text">往復</span></td>
                                                <td><span class="readonly-text">要</span></td>
                                                <td><span class="readonly-text" style="text-align: left;"></span></td>
                                            </tr>
                                            <tr onclick="openModal('edit-usage-setting-modal')" style="cursor: pointer;">
                                                <td><span class="readonly-text" style="font-weight: 600;">金</span></td>
                                                <td><span class="readonly-text" style="color: var(--color-primary);">利用</span></td>
                                                <td><span class="readonly-text">09:30 〜 15:30</span></td>
                                                <td><span class="readonly-text">往復</span></td>
                                                <td><span class="readonly-text">要</span></td>
                                                <td><span class="readonly-text" style="text-align: left;"></span></td>
                                            </tr>
                                            <tr onclick="openModal('edit-usage-setting-modal')" style="cursor: pointer;">
                                                <td><span class="readonly-text" style="font-weight: 600; color: var(--color-text-secondary);">土</span></td>
                                                <td><span class="readonly-text" style="color: var(--color-danger);">休</span></td>
                                                <td><span class="readonly-text"></span></td>
                                                <td><span class="readonly-text">無</span></td>
                                                <td><span class="readonly-text">不要</span></td>
                                                <td><span class="readonly-text" style="text-align: left;">事業所休</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="tab-calendar" class="tab-content">
                        <div class="section">
                            <div class="list-page-header">
                                <h2 class="section-title">利用カレンダー</h2>
                                <button class="button button-primary" onclick="alert('（カレンダーを一括編集するモーダルを表示）')">利用日設定を適用</button>
                            </div>
                             <div class="calendar-header" style="justify-content: center; margin-bottom: 1rem;">
                                <button class="button button-secondary">&lt;</button>
                                <h3 style="margin: 0 1rem; font-size: 1.2rem;">2025年 10月</h3>
                                <button class="button button-secondary">&gt;</button>
                            </div>
                            <div class="table-wrapper">
                                <table class="table calendar-table" style="text-align: center;">
                                    <thead>
                                        <tr>
                                            <th style="color: red;">日</th><th>月</th><th>火</th><th>水</th><th>木</th><th>金</th><th style="color: blue;">土</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td onclick="openModal('service-record-modal')"></td>
                                            <td onclick="openModal('service-record-modal')"></td>
                                            <td onclick="openModal('service-record-modal')"></td>
                                            <td onclick="openModal('service-record-modal')">1</td>
                                            <td onclick="openModal('service-record-modal')">2</td>
                                            <td onclick="openModal('service-record-modal')">3</td>
                                            <td onclick="openModal('service-record-modal')" style="background-color: #fde2e2;">4</td>
                                        </tr>
                                        <tr>
                                            <td onclick="openModal('service-record-modal')" style="background-color: #fde2e2;">5</td>
                                            <td onclick="openModal('service-record-modal')">6</td>
                                            <td onclick="openModal('service-record-modal')">7</td>
                                            <td onclick="openModal('service-record-modal')">8</td>
                                            <td onclick="openModal('service-record-modal')">9</td>
                                            <td onclick="openModal('service-record-modal')">10</td>
                                            <td onclick="openModal('service-record-modal')" style="background-color: #fde2e2;">11</td>
                                        </tr>
                                        <tr>
                                            <td onclick="openModal('service-record-modal')" style="background-color: #fde2e2;">12</td>
                                            <td onclick="openModal('service-record-modal')" style="background-color: #ffe8cc;">13</td>
                                            <td onclick="openModal('service-record-modal')">14</td>
                                            <td onclick="openModal('service-record-modal')">15</td>
                                            <td onclick="openModal('service-record-modal')">16</td>
                                            <td onclick="openModal('service-record-modal')">17</td>
                                            <td onclick="openModal('service-record-modal')" style="background-color: #fde2e2;">18</td>
                                        </tr>
                                        <tr>
                                            <td onclick="openModal('service-record-modal')" style="background-color: #fde2e2;">19</td>
                                            <td onclick="openModal('service-record-modal')">20</td>
                                            <td onclick="openModal('service-record-modal')">21</td>
                                            <td onclick="openModal('service-record-modal')">22</td>
                                            <td onclick="openModal('service-record-modal')">23</td>
                                            <td onclick="openModal('service-record-modal')">24</td>
                                            <td onclick="openModal('service-record-modal')" style="background-color: #fde2e2;">25</td>
                                        </tr>
                                         <tr>
                                            <td onclick="openModal('service-record-modal')" style="background-color: #fde2e2;">26</td>
                                            <td onclick="openModal('service-record-modal')">27</td>
                                            <td onclick="openModal('service-record-modal')">28</td>
                                            <td onclick="openModal('service-record-modal')">29</td>
                                            <td onclick="openModal('service-record-modal')">30</td>
                                            <td onclick="openModal('service-record-modal')">31</td>
                                            <td onclick="openModal('service-record-modal')"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <p style="text-align: center; margin-top: 1rem; font-size: var(--font-size-sm);">日付をクリックして日々の記録（サービス提供実績）を追加・編集します。</p>
                        </div>
                    </div>
                    <div id="tab-health-medical" class="tab-content">
                        <div class="section">
                            <div class="list-page-header">
                                <h2 class="section-title">障害特性</h2>
                                <div class="section-header-controls">
                                    <div class="form-group-inline">
                                        <label><input type="radio" name="disability-toggle" value="yes" checked> 有り</label>
                                        <label><input type="radio" name="disability-toggle" value="no"> 無し</label>
                                    </div>
                                    <button type="button" class="button button-primary" id="add-disability-row">＋ 障害を追加</button>
                                </div>
                            </div>
                             <div class="table-wrapper">
                                <table class="table" id="disability-table">
                                    <thead><tr><th style="width: 200px;">障害種別</th><th>障害名</th><th>特性・配慮事項</th><th class="col-actions" style="width: 100px;">操作</th></tr></thead>
                                    <tbody id="disability-table-body">
                                        <tr>
                                            <td><span class="readonly-text">精神</span></td><td><span class="readonly-text">統合失調症</span></td><td><span class="readonly-textarea">聴覚過敏があるため、イヤーマフの使用を許可。大きな音のする作業は避ける。</span></td>
                                            <td class="col-actions"><div class="table-button-group"><button type="button" class="button button-secondary edit-row-button" data-modal-id="edit-disability-modal">編集</button><button type="button" class="button button-danger">削除</button></div></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="section">
                             <div class="list-page-header">
                                <h2 class="section-title">難病特性</h2>
                                <div class="section-header-controls">
                                    <div class="form-group-inline">
                                        <label><input type="radio" name="disease-toggle" value="yes"> 有り</label>
                                        <label><input type="radio" name="disease-toggle" value="no" checked> 無し</label>
                                    </div>
                                    <button type="button" class="button button-primary" id="add-disease-row" disabled>＋ 難病を追加</button>
                                </div>
                             </div>
                             <div class="table-wrapper" style="display: none;">
                                <table class="table" id="disease-table">
                                    <thead><tr><th style="width: 200px;">難病名</th><th>特性・配慮事項</th><th class="col-actions" style="width: 100px;">操作</th></tr></thead>
                                    <tbody id="disease-table-body"></tbody>
                                </table>
                            </div>
                         </div>
                        <div class="section">
                            <div class="list-page-header">
                                <h2 class="section-title">アレルギー</h2>
                                <div class="section-header-controls">
                                    <div class="form-group-inline">
                                        <label><input type="radio" name="allergy-toggle" value="yes" checked> 有り</label>
                                        <label><input type="radio" name="allergy-toggle" value="no"> 無し</label>
                                    </div>
                                    <button type="button" class="button button-primary" id="add-allergy-row">＋ アレルギーを追加</button>
                                </div>
                            </div>
                             <div class="table-wrapper">
                                <table class="table" id="allergy-table">
                                     <thead><tr><th style="width: 200px;">アレルゲン</th><th>症状・注意事項</th><th class="col-actions" style="width: 100px;">操作</th></tr></thead>
                                    <tbody id="allergy-table-body">
                                        <tr>
                                            <td><span class="readonly-text">そば</span></td><td><span class="readonly-textarea">アナフィラキシーの可能性あり。調理器具の共有不可。</span></td>
                                            <td class="col-actions"><div class="table-button-group"><button type="button" class="button button-secondary edit-row-button" data-modal-id="edit-allergy-modal">編集</button><button type="button" class="button button-danger">削除</button></div></td>
                                        </tr>
                                    </tbody>
                                </table>
                             </div>
                         </div>
                         <div class="section">
                             <div class="list-page-header">
                                <h2 class="section-title">かかりつけ医療機関</h2>
                                <div class="section-header-controls">
                                    <div class="form-group-inline">
                                        <label><input type="radio" name="clinic-toggle" value="yes" checked> 有り</label>
                                        <label><input type="radio" name="clinic-toggle" value="no"> 無し</label>
                                    </div>
                                    <button type="button" class="button button-primary" id="add-clinic-row">＋ 機関を追加</button>
                                </div>
                             </div>
                             <div class="table-wrapper">
                                <table class="table" id="clinic-table">
                                    <thead><tr><th style="width: 150px;">関連(障害/難病)</th><th>医療機関情報</th><th>連絡先</th><th class="col-actions" style="width: 100px;">操作</th></tr></thead>
                                    <tbody id="clinic-table-body">
                                         <tr>
                                             <td><span class="readonly-text">精神障害 (統合失調症)</span></td><td><div class="clinic-info"><span class="clinic-name">〇〇メンタルクリニック</span><span class="clinic-dept-doctor">精神科 / △△ 医師</span></div></td><td><span class="readonly-text">03-YYYY-ZZZZ</span></td>
                                             <td class="col-actions"><div class="table-button-group"><button type="button" class="button button-secondary edit-row-button" data-modal-id="edit-clinic-modal">編集</button><button type="button" class="button button-danger">削除</button></div></td>
                                         </tr>
                                    </tbody>
                                </table>
                             </div>
                        </div>
                    </div>
                    <div id="tab-certificates" class="tab-content">
                        <div class="section">
                             <div class="section-header">
                                <h2 class="section-title-in-header">障害福祉サービス受給者証</h2>
                                <button class="button button-primary" onclick="openModal('edit-certificate1-modal')">編集</button>
                            </div>
                             <div class="section-content">
                                <dl class="detail-grid"><dt>支給決定期間</dt><dd>2025年4月1日 〜 2026年3月31日</dd><dt>利用者負担割合</dt><dd>1割</dd><dt>負担上限月額</dt><dd>0 円</dd></dl>
                            </div>
                        </div>
                        <div class="section">
                             <div class="section-header">
                                <h2 class="section-title-in-header">障害者手帳</h2>
                                <button class="button button-primary" onclick="openModal('edit-certificate2-modal')">編集</button>
                            </div>
                             <div class="section-content">
                                 <dl class="detail-grid"><dt>手帳種別</dt><dd>精神障害者保健福祉手帳</dd><dt>等級</dt><dd>2級</dd><dt>交付日</dt><dd>2022年10月1日</dd></dl>
                             </div>
                        </div>
                    </div>
                    <div id="tab-support-plan" class="tab-content">
                        <div class="list-page-header">
                            <h2 class="section-title">個別支援計画</h2>
                            <button class="button button-primary" onclick="openModal('support-plan-modal')">＋ 新規計画作成</button>
                          </div>
                        <div style="display: flex; gap: 1.5rem;">
                            <div style="width: 30%;">
                                <div class="section"><h3 style="font-size: 1.1rem;">計画一覧</h3><div class="section-content"><ul class="nav-list"><li><a href="#" class="nav-link active">2025.09.15 作成</a></li><li><a href="#" class="nav-link">2025.03.15 作成</a></li></ul></div></div>
                            </div>
                            <div style="width: 70%;">
                                <div class="section"><h3 style="font-size: 1.1rem;">計画詳細 (2025.09.15版)</h3><div class="section-content"><dl class="detail-grid"><dt>本人の希望</dt><dd>PCを使った仕事ができるようになりたい。</dd><dt>長期目標</dt><dd>データ入力の案件を一人で担当できるようになる。</dd><dt>短期目標</dt><dd>タイピングの正確性を上げる。</dd></dl></div></div>
                                 <div class="section"><div class="list-page-header"><h3 style="font-size: 1.1rem; margin:0;" class="section-title">モニタリング記録</h3><button class="button button-primary" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;" onclick="openModal('monitoring-modal')">＋ モニタリング追加</button></div><div class="section-content"><p><strong>2025.12.20 (支援員 次郎)</strong></p><p>短期目標Aについて達成度80%。本人の意欲も高く、来月から次のステップに進むことを検討。</p></div></div>
                            </div>
                        </div>
                    </div>
                    <div id="tab-communication" class="tab-content">
                        <div class="section"><div class="list-page-header"><h2 class="section-title">面談記録一覧</h2><button class="button button-primary" onclick="openModal('interview-modal')">＋ 新規記録作成</button></div><div class="table-wrapper"><table class="table"><thead><tr><th>面談日</th><th>種別</th><th>対応者</th><th>操作</th></tr></thead><tbody><tr><td>2025.10.10</td><td>定期面談</td><td>支援員 次郎</td><td><button class="button button-primary" onclick="openModal('interview-modal')">表示</button></td></tr></tbody></table></div></div>
                         <div class="section"><div class="list-page-header"><h2 class="section-title">連携記録一覧</h2><button class="button button-primary" onclick="openModal('linkage-modal')">＋ 新規記録作成</button></div><div class="table-wrapper"><table class="table"><thead><tr><th>日時</th><th>対象者/機関</th><th>対応者</th><th>操作</th></tr></thead><tbody><tr><td>2025.10.05</td><td>母・花子様</td><td>管理者 太郎</td><td><button class="button button-primary" onclick="openModal('linkage-modal')">表示</button></td></tr></tbody></table></div></div>
                    </div>
                    <div id="tab-documents" class="tab-content">
                        <div class="list-page-header"><h2 class="section-title">関連書類一覧</h2><button class="button button-primary">＋ アップロード</button></div>
                        <div class="table-wrapper"><table class="table"><thead><tr><th>ファイル名</th><th>更新日時</th><th class="col-actions">操作</th></tr></thead><tbody><tr><td>契約書_20240401.pdf</td><td>2024/04/01 10:00</td><td class="col-actions"><div class="table-button-group"><button class="button button-secondary">ダウンロード</button><button class="button button-danger">削除</button></div></td></tr><tr><td>個別支援計画_20250915.pdf</td><td>2025/09/15 14:30</td><td class="col-actions"><div class="table-button-group"><button class="button button-secondary">ダウンロード</button><button class="button button-danger">削除</button></div></td></tr></tbody></table></div>
                    </div>
                </div> </div>

            <div id="edit-basic-info-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">基本情報 編集</h2>
                        <span class="modal-close" onclick="closeModal('edit-basic-info-modal')">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>氏名</label>
                            <input type="text" class="form-control" value="青木 誠">
                        </div>
                        <div class="form-group">
                            <label>フリガナ</label>
                            <input type="text" class="form-control" value="アオキ マコト">
                        </div>
                        <div class="form-group">
                            <label>利用者番号</label>
                            <input type="text" class="form-control" value="A001">
                        </div>
                        <div class="form-group">
                            <label>生年月日</label>
                            <input type="date" class="form-control" value="2000-04-01">
                        </div>
                        <div class="form-group">
                            <label>性別</label>
                            <select class="form-control">
                                <option value="male" selected>男性</option>
                                <option value="female">女性</option>
                                <option value="other">その他</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>契約日</label>
                            <input type="date" class="form-control" value="2024-04-01">
                        </div>
                        <div class="form-group">
                            <label>契約状況</label>
                            <select class="form-control">
                                <option value="active" selected>利用中</option>
                                <option value="inactive">利用終了</option>
                                <option value="pending">待機中</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>担当職員</label>
                            <select class="form-control">
                                <option value="staff1">管理者 太郎</option>
                                <option value="staff2" selected>支援員 次郎</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('edit-basic-info-modal')">キャンセル</button>
                        <button type="button" class="button button-primary">保存</button>
                    </div>
                </div>
            </div>
            
            <div id="edit-address-contact-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">住所・連絡先 編集</h2>
                        <span class="modal-close" onclick="closeModal('edit-address-contact-modal')">&times;</span>
                    </div>
                    <div class="modal-body">
                         <div class="form-group">
                            <label>郵便番号</label>
                            <input type="text" class="form-control" value="123-4567">
                        </div>
                        <div class="form-group">
                            <label>住所</label>
                            <input type="text" class="form-control" value="東京都渋谷区...">
                        </div>
                        <div class="form-group">
                            <label>電話番号</label>
                            <input type="tel" class="form-control" value="090-XXXX-XXXX">
                        </div>
                        <div class="form-group">
                            <label>FAX番号</label>
                            <input type="tel" class="form-control" value="">
                        </div>
                        <div class="form-group">
                            <label>メールアドレス</label>
                            <input type="email" class="form-control" value="aoki.makoto@example.com">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('edit-address-contact-modal')">キャンセル</button>
                        <button type="button" class="button button-primary">保存</button>
                    </div>
                </div>
            </div>

            <div id="edit-disability-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">障害特性 編集/追加</h2>
                        <span class="modal-close" onclick="closeModal('edit-disability-modal')">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>障害種別</label>
                            <select class="form-control">
                                <option value="physical">身体</option>
                                <option value="intellectual">知的</option>
                                <option value="mental" selected>精神</option>
                                <option value="developmental">発達</option>
                                <option value="other">その他</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>障害名</label>
                            <input type="text" class="form-control" value="統合失調症">
                        </div>
                        <div class="form-group">
                            <label>特性・配慮事項</label>
                            <textarea class="form-control" rows="4">聴覚過敏があるため、イヤーマフの使用を許可。大きな音のする作業は避ける。</textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('edit-disability-modal')">キャンセル</button>
                        <button type="button" class="button button-primary">保存</button>
                    </div>
                </div>
            </div>
            
            <div id="edit-disease-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">難病特性 編集/追加</h2>
                        <span class="modal-close" onclick="closeModal('edit-disease-modal')">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>難病名</label>
                            <input type="text" class="form-control" value="">
                        </div>
                        <div class="form-group">
                            <label>特性・配慮事項</label>
                            <textarea class="form-control" rows="4"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('edit-disease-modal')">キャンセル</button>
                        <button type="button" class="button button-primary">保存</button>
                    </div>
                </div>
            </div>
            
            <div id="edit-allergy-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">アレルギー 編集/追加</h2>
                        <span class="modal-close" onclick="closeModal('edit-allergy-modal')">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>アレルゲン</label>
                            <input type="text" class="form-control" value="そば">
                        </div>
                        <div class="form-group">
                            <label>症状・注意事項</label>
                            <textarea class="form-control" rows="4">アナフィラキシーの可能性あり。調理器具の共有不可。</textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('edit-allergy-modal')">キャンセル</button>
                        <button type="button" class="button button-primary">保存</button>
                    </div>
                </div>
            </div>
            
            <div id="edit-clinic-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">かかりつけ医療機関 編集/追加</h2>
                        <span class="modal-close" onclick="closeModal('edit-clinic-modal')">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>関連(障害/難病)</label>
                            <input type="text" class="form-control" value="精神障害 (統合失調症)">
                        </div>
                        <div class="form-group">
                            <label>医療機関名</label>
                            <input type="text" class="form-control" value="〇〇メンタルクリニック">
                        </div>
                        <div class="form-group">
                            <label>診療科・担当医</label>
                            <input type="text" class="form-control" value="精神科 / △△ 医師">
                        </div>
                        <div class="form-group">
                            <label>連絡先</label>
                            <input type="tel" class="form-control" value="03-YYYY-ZZZZ">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('edit-clinic-modal')">キャンセル</button>
                        <button type="button" class="button button-primary">保存</button>
                    </div>
                </div>
            </div>
            
            <div id="edit-specialist-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">相談支援専門員 編集/追加</h2>
                        <span class="modal-close" onclick="closeModal('edit-specialist-modal')">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>氏名</label>
                            <input type="text" class="form-control" value="□□ □□">
                        </div>
                        <div class="form-group">
                            <label>事業所名</label>
                            <input type="text" class="form-control" value="相談支援センター××">
                        </div>
                        <div class="form-group">
                            <label>連絡先</label>
                            <input type="tel" class="form-control" value="03-AAAA-BBBB">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('edit-specialist-modal')">キャンセル</button>
                        <button type="button" class="button button-primary">保存</button>
                    </div>
                </div>
            </div>

            <div id="edit-certificate1-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">障害福祉サービス受給者証 編集</h2>
                        <span class="modal-close" onclick="closeModal('edit-certificate1-modal')">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>支給決定期間 (開始)</label>
                            <input type="date" class="form-control" value="2025-04-01">
                        </div>
                        <div class="form-group">
                            <label>支給決定期間 (終了)</label>
                            <input type="date" class="form-control" value="2026-03-31">
                        </div>
                        <div class="form-group">
                            <label>利用者負担割合</label>
                            <select class="form-control">
                                <option value="0">0割</option>
                                <option value="1" selected>1割</option>
                                <option value="2">2割</option>
                                <option value="3">3割</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>負担上限月額 (円)</label>
                            <input type="number" class="form-control" value="0">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('edit-certificate1-modal')">キャンセル</button>
                        <button type="button" class="button button-primary">保存</button>
                    </div>
                </div>
            </div>
            
            <div id="edit-certificate2-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">障害者手帳 編集</h2>
                        <span class="modal-close" onclick="closeModal('edit-certificate2-modal')">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>手帳種別</label>
                            <select class="form-control">
                                <option value="physical">身体障害者手帳</option>
                                <option value="mental" selected>精神障害者保健福祉手帳</option>
                                <option value="intellectual">療育手帳</option>
                            </select>
                        </div>
                         <div class="form-group">
                            <label>等級</label>
                            <input type="text" class="form-control" value="2級">
                        </div>
                        <div class="form-group">
                            <label>交付日</label>
                            <input type="date" class="form-control" value="2022-10-01">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('edit-certificate2-modal')">キャンセル</button>
                        <button type="button" class="button button-primary">保存</button>
                    </div>
                </div>
            </div>
            
            <div id="edit-emergency-contact-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">緊急連絡先 編集/追加</h2>
                        <span class="modal-close" onclick="closeModal('edit-emergency-contact-modal')">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>氏名</label>
                            <input type="text" class="form-control" value="青木 花子">
                        </div>
                        <div class="form-group">
                            <label>続柄</label>
                            <input type="text" class="form-control" value="母">
                        </div>
                        <div class="form-group">
                            <label>電話番号</label>
                            <input type="tel" class="form-control" value="080-XXXX-XXXX">
                        </div>
                        <div class="form-group">
                            <label>優先度</label>
                            <select class="form-control">
                                <option value="1" selected>1 (最優先)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="99">その他</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('edit-emergency-contact-modal')">キャンセル</button>
                        <button type="button" class="button button-primary">保存</button>
                    </div>
                </div>
            </div>

            <div id="edit-usage-setting-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">利用日設定 編集 (月曜日)</h2> <span class="modal-close" onclick="closeModal('edit-usage-setting-modal')">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>曜日</label>
                            <input type="text" class="form-control" value="月曜日" readonly style="background: var(--color-hover-bg);">
                        </div>
                        <div class="form-group">
                            <label>利用区分</label>
                            <select class="form-control">
                                <option value="use" selected>利用</option>
                                <option value="rest">休</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>利用時間</label>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="time" class="form-control" value="09:30">
                                <span>〜</span>
                                <input type="time" class="form-control" value="15:30">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>送迎</label>
                            <select class="form-control">
                                <option value="none">無</option>
                                <option value="roundtrip" selected>往復</option>
                                <option value="oneway_go">往（迎えのみ）</option>
                                <option value="oneway_back">復（送りのみ）</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>昼食</label>
                            <select class="form-control">
                                <option value="yes" selected>要</option>
                                <option value="no">不要</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>備考</label>
                            <textarea class="form-control" rows="3"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('edit-usage-setting-modal')">キャンセル</button>
                        <button type="button" class="button button-primary">保存</button>
                    </div>
                </div>
            </div>

            <div id="service-record-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">日々の記録 (2025/10/01)</h2> <span class="modal-close" onclick="closeModal('service-record-modal')">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>利用実績</label>
                            <select class="form-control">
                                <option value="attended" selected>利用 (通所)</option>
                                <option value="remote">利用 (在宅)</option>
                                <option value="absent_with_reason">欠席 (連絡あり)</option>
                                <option value="absent_without_reason">欠席 (連絡なし)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>利用時間</label>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="time" class="form-control" value="09:30">
                                <span>〜</span>
                                <input type="time" class="form-control" value="15:30">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>昼食</label>
                            <select class="form-control">
                                <option value="yes" selected>要</option>
                                <option value="no">不要</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>送迎</label>
                            <select class="form-control">
                                <option value="none">無</option>
                                <option value="roundtrip" selected>往復</option>
                                <option value="oneway_go">往（迎えのみ）</option>
                                <option value="oneway_back">復（送りのみ）</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>作業内容メモ</label>
                            <textarea class="form-control" rows="3">データ入力作業 (A案件) を実施。</textarea>
                        </div>
                        <div class="form-group">
                            <label>支援員メモ (内部用)</label>
                            <textarea class="form-control" rows="3">集中して取り組めていた。15時にやや疲れが見られたため声掛け。</textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('service-record-modal')">キャンセル</button>
                        <button type="button" class="button button-primary">保存</button>
                    </div>
                </div>
            </div>
            <div id="support-plan-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">個別支援計画 作成/編集</h2>
                        <span class="modal-close" onclick="closeModal('support-plan-modal')">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>計画作成日</label>
                            <input type="date" class="form-control" value="2025-09-15">
                        </div>
                        <div class="form-group">
                            <label>本人の希望</label>
                            <textarea class="form-control" rows="3">PCを使った仕事ができるようになりたい。</textarea>
                        </div>
                        <div class="form-group">
                            <label>長期目標</label>
                            <textarea class="form-control" rows="3">データ入力の案件を一人で担当できるようになる。</textarea>
                        </div>
                        <div class="form-group">
                            <label>短期目標</label>
                            <textarea class="form-control" rows="3">タイピングの正確性を上げる。</textarea>
                        </div>
                         <div class="form-group">
                            <label>支援内容</label>
                            <textarea class="form-control" rows="3">タイピング練習ソフトの実施。週1回の進捗確認面談。</textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('support-plan-modal')">キャンセル</button>
                        <button type="button" class="button button-primary">保存</button>
                    </div>
                </div>
            </div>
            
            <div id="monitoring-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">モニタリング記録 追加</h2>
                        <span class="modal-close" onclick="closeModal('monitoring-modal')">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>モニタリング日</label>
                            <input type="date" class="form-control" value="2025-12-20">
                        </div>
                        <div class="form-group">
                            <label>対応職員</label>
                            <select class="form-control">
                                <option value="staff1">管理者 太郎</option>
                                <option value="staff2" selected>支援員 次郎</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>記録内容</label>
                            <textarea class="form-control" rows="5">短期目標Aについて達成度80%。本人の意欲も高く、来月から次のステップに進むことを検討。</textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('monitoring-modal')">キャンセル</button>
                        <button type="button" class="button button-primary">保存</button>
                    </div>
                </div>
            </div>
            
            <div id="interview-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">面談記録 編集/追加</h2>
                        <span class="modal-close" onclick="closeModal('interview-modal')">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>面談日</label>
                            <input type="date" class="form-control" value="2025-10-10">
                        </div>
                        <div class="form-group">
                            <label>種別</label>
                            <select class="form-control">
                                <option value="regular" selected>定期面談</option>
                                <option value="adhoc">随時面談</option>
                                <option value="other">その他</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>対応者</label>
                            <select class="form-control">
                                <option value="staff1">管理者 太郎</option>
                                <option value="staff2" selected>支援員 次郎</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>面談内容</label>
                            <textarea class="form-control" rows="5">（面談内容の記録...）</textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('interview-modal')">キャンセル</button>
                        <button type="button" class="button button-primary">保存</button>
                    </div>
                </div>
            </div>
            
            <div id="linkage-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">連携記録 編集/追加</h2>
                        <span class="modal-close" onclick="closeModal('linkage-modal')">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>日時</label>
                            <input type="datetime-local" class="form-control" value="2025-10-05T10:00">
                        </div>
                        <div class="form-group">
                            <label>対象者/機関</label>
                            <input type="text" class="form-control" value="母・花子様">
                        </div>
                        <div class="form-group">
                            <label>対応者</label>
                            <select class="form-control">
                                <option value="staff1" selected>管理者 太郎</option>
                                <option value="staff2">支援員 次郎</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>連携内容</label>
                            <textarea class="form-control" rows="5">（ご家族との連携内容の記録...）</textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="button button-secondary" onclick="closeModal('linkage-modal')">キャンセル</button>
                        <button type="button" class="button button-primary">保存</button>
                    </div>
                </div>
            </div>
            
            <template id="disability-row-template">
                <tr>
                    <td>
                        <select class="form-control">
                           <option value="">選択</option>
                           <option value="physical">身体</option>
                           <option value="intellectual">知的</option>
                           <option value="mental">精神</option>
                           <option value="developmental">発達</option>
                           <option value="other">その他</option>
                        </select>
                    </td>
                    <td><input type="text" class="form-control" placeholder="障害名"></td>
                    <td><textarea class="form-control" rows="1" placeholder="特性・配慮事項"></textarea></td>
                    <td class="col-actions"><div class="table-button-group"><button type="button" class="button button-danger">削除</button></div></td>
                </tr>
            </template>
            <template id="disease-row-template">
                 <tr>
                    <td><input type="text" class="form-control" placeholder="難病名"></td>
                    <td><textarea class="form-control" rows="1" placeholder="特性・配慮事項"></textarea></td>
                    <td class="col-actions"><div class="table-button-group"><button type="button" class="button button-danger">削除</button></div></td>
                </tr>
            </template>
            <template id="allergy-row-template">
                <tr>
                    <td><input type="text" class="form-control" placeholder="アレルゲン"></td>
                    <td><textarea class="form-control" rows="1" placeholder="症状・注意事項"></textarea></td>
                    <td class="col-actions"><div class="table-button-group"><button type="button" class="button button-danger">削除</button></div></td>
                </tr>
            </template>
            <template id="clinic-row-template">
                 <tr>
                    <td><input type="text" class="form-control" placeholder="関連(障害/難病)"></td>
                    <td>
                        <input type="text" class="form-control" placeholder="医療機関名" style="margin-bottom: 0.25rem;">
                        <input type="text" class="form-control" placeholder="診療科 / 担当医">
                    </td>
                    <td><input type="tel" class="form-control" placeholder="連絡先"></td>
                    <td class="col-actions"><div class="table-button-group"><button type="button" class="button button-danger">削除</button></div></td>
                </tr>
            </template>
            <template id="specialist-row-template">
                 <tr>
                    <td><input type="text" class="form-control" placeholder="氏名"></td>
                    <td><input type="text" class="form-control" placeholder="事業所名"></td>
                    <td><input type="tel" class="form-control" placeholder="連絡先"></td>
                    <td class="col-actions"><div class="table-button-group"><button type="button" class="button button-danger">削除</button></div></td>
                </tr>
            </template>
            <template id="emergency-contact-row-template">
                <tr>
                    <td>
                        <select class="form-control">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="99" selected>他</option>
                        </select>
                    </td>
                    <td><input type="text" class="form-control" placeholder="氏名"></td>
                    <td><input type="text" class="form-control" placeholder="続柄"></td>
                    <td><input type="tel" class="form-control" placeholder="電話番号"></td>
                    <td class="col-actions"><div class="table-button-group"><button type="button" class="button button-danger">削除</button></div></td>
                </tr>
            </template>
            </main>
    </div>

    <script src="../script.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- 利用者詳細: サブナビゲーション（タブ）切り替え ---
            const subNavContainer = document.getElementById('member-detail-subnav');
            const tabContents = document.querySelectorAll('#member-detail .tab-content');
            
            if (subNavContainer && tabContents.length > 0) {
                subNavContainer.addEventListener('click', (e) => {
                    const navItem = e.target.closest('.sub-nav-item');
                    if (!navItem || navItem.classList.contains('active')) { return; }
                    e.preventDefault();
                    const targetTabId = navItem.dataset.tab;
                    subNavContainer.querySelectorAll('.sub-nav-item').forEach(item => { item.classList.remove('active'); });
                    navItem.classList.add('active');
                    tabContents.forEach(content => {
                        // toggleではなく、対象以外を非表示、対象を表示に変更
                        if (content.id === targetTabId) {
                            content.classList.add('active');
                        } else {
                            content.classList.remove('active');
                        }
                    });
                });
            }

            // --- 汎用関数の呼び出し (定義は script.js) ---
            // エラーチェックを追加
            const checkElement = (id) => document.getElementById(id);
            const checkClosest = (el, selector) => el?.closest(selector); // Optional chaining

            // setupTableInteraction の呼び出し (要素の存在確認を追加)
            if (window.setupTableInteraction) {
                // 健康・医療タブ
                if (checkElement('disability-table-body') && checkElement('add-disability-row')) setupTableInteraction('disability-table-body', 'add-disability-row', 'edit-disability-modal');
                if (checkElement('disease-table-body') && checkElement('add-disease-row')) setupTableInteraction('disease-table-body', 'add-disease-row', 'edit-disease-modal');
                if (checkElement('allergy-table-body') && checkElement('add-allergy-row')) setupTableInteraction('allergy-table-body', 'add-allergy-row', 'edit-allergy-modal');
                if (checkElement('clinic-table-body') && checkElement('add-clinic-row')) setupTableInteraction('clinic-table-body', 'add-clinic-row', 'edit-clinic-modal');
                // 住所・連絡先タブ
                if (checkElement('emergency-contact-table-body') && checkElement('add-emergency-contact-row')) setupTableInteraction('emergency-contact-table-body', 'add-emergency-contact-row', 'edit-emergency-contact-modal');
                if (checkElement('specialist-table-body') && checkElement('add-specialist-row')) setupTableInteraction('specialist-table-body', 'add-specialist-row', 'edit-specialist-modal');
            } else {
                console.warn('setupTableInteraction function is not defined.');
            }

            // setupToggleUI の呼び出し (要素の存在確認とclosestの結果確認を追加)
            if (window.setupToggleUI) {
                const specialistTable = checkElement('specialist-table');
                const disabilityTable = checkElement('disability-table');
                const diseaseTable = checkElement('disease-table');
                const allergyTable = checkElement('allergy-table');
                const clinicTable = checkElement('clinic-table');

                // 住所・連絡先タブ
                if (specialistTable && checkClosest(specialistTable, '.table-wrapper')) setupToggleUI('specialist-toggle', 'add-specialist-row', specialistTable.closest('.table-wrapper'));
                // 健康・医療タブ
                if (disabilityTable && checkClosest(disabilityTable, '.table-wrapper')) setupToggleUI('disability-toggle', 'add-disability-row', disabilityTable.closest('.table-wrapper'));
                if (diseaseTable && checkClosest(diseaseTable, '.table-wrapper')) setupToggleUI('disease-toggle', 'add-disease-row', diseaseTable.closest('.table-wrapper'));
                if (allergyTable && checkClosest(allergyTable, '.table-wrapper')) setupToggleUI('allergy-toggle', 'add-allergy-row', allergyTable.closest('.table-wrapper'));
                if (clinicTable && checkClosest(clinicTable, '.table-wrapper')) setupToggleUI('clinic-toggle', 'add-clinic-row', clinicTable.closest('.table-wrapper'));
            } else {
                 console.warn('setupToggleUI function is not defined.');
            }


            // showPage 関数の存在確認 (念のため)
            if (typeof showPage === 'undefined') {
                console.warn('showPage function is not globally defined. Row click might not work.');
            }
        });
    </script>

</body>
</html>